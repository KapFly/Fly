# é…ç½®æ¨¡æ¿
# æ›´æ–°æ™‚é–“ï¼š20XX-XX-XX
# ä¾†æºï¼š/Johnshall/Shadowrocket-ADBlock-Rules-Forever/build/lazy.conf
# Shadowrocketæ·»åŠ é ç¨‹é…ç½®æ–¹æ³•ï¼šé…ç½® - å³ä¸Šè§’â• - ç²˜è²¼é…ç½®éˆæ¥ - ä¸‹è¼‰ - é»æ“Šé ç¨‹æ–‡ä»¶ä¸‹çš„é…ç½®éˆæ¥ - ä½¿ç”¨é…ç½®ã€‚
[General]
# Shadowrocketå¿«é€Ÿä½¿ç”¨æ–¹æ³•ï¼š
# 1.é¦–é  - å³ä¸Šè§’â• - é¡å‹Subscribe - URLæ¬„è¼¸å…¥æ©Ÿå ´è¨‚é–±éˆæ¥ - ä¿å­˜ã€‚
# 2.é¦–é  - å…¨å±€è·¯ç”± - é¸æ“‡é…ç½®ã€‚
# 3.è¨­ç½® - å»¶é²æ¸¬è©¦æ–¹æ³• - é¸æ“‡CONNECTã€‚
# 4.é¦–é å±•é–‹ç¯€é»åˆ—è¡¨ï¼Œé»æ“Šé€£é€šæ€§æ¸¬è©¦ï¼Œé¸æ“‡å¯ç”¨ç¯€é»é€²è¡Œé€£æ¥ã€‚
# å¦‚æœæ‚¨æ˜¯è‡ªå»ºç¯€é»ï¼Œæˆ–è€…æ“æœ‰ç¯€é»ä¿¡æ¯ï¼Œå¯åœ¨æ­¥é©Ÿ1çš„é¡å‹ä¸­é¸æ“‡å°æ‡‰ç¯€é»é¡å‹ï¼ˆå¦‚Shadowsocksã€Vmessã€Socks5ã€Trojanã€Hysteriaç­‰ï¼‰ï¼Œç„¶å¾Œå¡«å¯«å’Œä¿å­˜ã€‚
# å¦‚æœæ‚¨æ˜¯æ“æœ‰ç¯€é»éˆæ¥ï¼ˆå¦‚trojan://***ã€vmess://***ç­‰ï¼‰ï¼Œå¯è¤‡è£½ç¯€é»éˆæ¥ï¼Œæ‰“é–‹Shadowrocketæœƒè‡ªå‹•è­˜åˆ¥å°å…¥ã€‚
# å°å…¥/æ›´æ–°è¨‚é–±éˆæ¥æ™‚ï¼Œå¦‚æœæç¤ºã€Œç™¼ç”Ÿäº†SSLéŒ¯èª¤ï¼Œç„¡æ³•å»ºç«‹èˆ‡è©²æœå‹™å™¨çš„å®‰å…¨é€£æ¥ã€ï¼Œå¯ä»¥å˜—è©¦çš„è§£æ±ºæ–¹æ³•ï¼š
# 1.å…¨å±€è·¯ç”±é¸ä»£ç†ï¼Œä½¿ç”¨å¦å¤–ä¸€å€‹ç¯€é»ä¾†å°å…¥/æ›´æ–°è¨‚é–±éˆæ¥ã€‚
# 2.åˆ‡æ›ç¶²çµ¡å¾Œå†å°å…¥/æ›´æ–°è¨‚é–±éˆæ¥ã€‚
# 3.æª¢æŸ¥è¨‚é–±éˆæ¥æ˜¯å¦éŒ¯èª¤æˆ–å¤±æ•ˆã€‚
# ----------
# Shadowrocketæ‰“é–‹HTTPSè§£å¯†æ–¹æ³•ï¼š
# 1.é»æ“Šé…ç½®æ–‡ä»¶å¾Œé¢â“˜ - HTTPSè§£å¯† - è­‰æ›¸ - ç”Ÿæˆæ–°çš„CAè­‰æ›¸ - å®‰è£è­‰æ›¸ã€‚
# 2.æ‰‹æ©Ÿè¨­ç½® - å·²ä¸‹è¼‰æè¿°æ–‡ä»¶ - å®‰è£ã€‚
# 3.æ‰‹æ©Ÿè¨­ç½® - é€šç”¨ - é—œæ–¼æœ¬æ©Ÿ - è­‰æ›¸ä¿¡ä»»è¨­ç½® - é–‹å•“å°æ‡‰Shadowrocketè­‰æ›¸ä¿¡ä»»ã€‚
# ----------
# æ—è·¯ç³»çµ±ã€‚å¦‚æœç¦ç”¨æ­¤é¸é …ï¼Œå¯èƒ½æœƒå°è‡´ä¸€äº›ç³»çµ±å•é¡Œï¼Œå¦‚æ¨é€é€šçŸ¥å»¶é²ã€‚
bypass-system = true
# è·³éä»£ç†ã€‚æ­¤é¸é …å¼·åˆ¶é€™äº›åŸŸåæˆ–IPçš„é€£æ¥ç¯„åœç”±Shadowrocket TUNæ¥å£ä¾†è™•ç†ï¼Œè€Œä¸æ˜¯Shadowrocketä»£ç†æœå‹™å™¨ã€‚æ­¤é¸é …ç”¨æ–¼è§£æ±ºä¸€äº›æ‡‰ç”¨ç¨‹åºçš„ä¸€äº›å…¼å®¹æ€§å•é¡Œã€‚
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com
# TUNæ—è·¯è·¯ç”±ã€‚Shadowrocket TUNæ¥å£åªèƒ½è™•ç†TCPå”è­°ã€‚ä½¿ç”¨æ­¤é¸é …å¯ä»¥ç¹éæŒ‡å®šçš„IPç¯„åœï¼Œè®“å…¶ä»–å”è­°é€šéã€‚
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
# DNSè¦†å¯«ã€‚ä½¿ç”¨æ™®é€šDNSæˆ–åŠ å¯†DNSï¼ˆå¦‚dohã€doqã€dotç­‰ï¼‰è¦†è“‹é»˜èªçš„ç³»çµ±DNSã€‚æœ‰äº›dns over httpsæ”¯æŒhttp3ï¼Œæ‰€ä»¥å˜—è©¦æŸ¥è©¢ï¼Œå¦‚æœæ”¯æŒå°±åˆ‡æ›åˆ°http3ã€‚å¯åœ¨dohéˆæ¥å¾Œé¢åŠ ä¸Š#no-h3é—œé–‰ã€‚dohå¼·åˆ¶é€šéh3æŸ¥è©¢çš„å¯«æ³•æ˜¯å°‡ã€Œhttpsã€æ”¹æˆã€Œh3ã€ï¼Œå¦‚h3://dns.alidns.com/dns-queryã€‚
dns-server = https://doh.pub/dns-query,https://dns.alidns.com/dns-query,223.5.5.5,119.29.29.29
# å‚™ç”¨DNSã€‚ç•¶è¦†å¯«çš„DNSè§£æå¤±æ•—å¾Œå›é€€å‚™ç”¨DNSï¼Œå¦‚éœ€æŒ‡å®šå¤šå€‹DNSï¼Œå¯ç”¨é€—è™Ÿåˆ†éš”ã€‚systemè¡¨ç¤ºå›é€€åˆ°ç³»çµ±DNSã€‚
fallback-dns-server = system
# å•“ç”¨IPv6æ”¯æŒã€‚falseè¡¨ç¤ºä¸å•“ç”¨ï¼Œtrueè¡¨ç¤ºå•“ç”¨ã€‚
ipv6 = false
# é¦–é¸IPv6ã€‚å„ªå…ˆå‘IPv6çš„DNSæœå‹™å™¨æŸ¥è©¢AAAAè¨˜éŒ„ï¼Œå„ªå…ˆä½¿ç”¨AAAAè¨˜éŒ„ã€‚falseè¡¨ç¤ºä¸å•“ç”¨ã€‚
prefer-ipv6 = false
# ç›´é€£çš„åŸŸåé¡è¦å‰‡ä½¿ç”¨ç³»çµ±dnsé€²è¡ŒæŸ¥è©¢ã€‚falseè¡¨ç¤ºä¸å•“ç”¨ã€‚
dns-direct-system = false
# pingæ•¸æ“šåŒ…è‡ªå‹•å›å¾©ã€‚
icmp-auto-reply = true
# ä¸é–‹å•“æ™‚ï¼ŒREJECTç­–ç•¥ é‡å¯«ç­–ç•¥ è…³æœ¬ é»˜èªåªæœ‰åœ¨é…ç½®æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚é–‹å•“å¾Œï¼Œå¯ä»¥ä»¤è©²ç­–ç•¥è…³æœ¬åœ¨å…¶ä»–å…¨å±€è·¯ç”±æ¨¡å¼ä¸‹éƒ½ç”Ÿæ•ˆã€‚
always-reject-url-rewrite = false
# ç§æœ‰IPæ‡‰ç­”ã€‚å¦‚æœä¸å•“ç”¨è©²é¸é …ï¼ŒåŸŸåè§£æè¿”å›ç§æœ‰IPï¼ŒShadowrocketæœƒèªç‚ºè©²åŸŸåè¢«åŠ«æŒè€Œå¼·åˆ¶ä½¿ç”¨ä»£ç†ã€‚
private-ip-answer = true
# ç›´é€£åŸŸåè§£æå¤±æ•—å¾Œä½¿ç”¨ä»£ç†ã€‚falseè¡¨ç¤ºä¸å•“ç”¨ã€‚
dns-direct-fallback-proxy = false
# ç•¶UDPæµé‡åŒ¹é…åˆ°è¦å‰‡é‡Œä¸æ”¯æŒUDPè½‰ç™¼çš„ç¯€é»ç­–ç•¥æ™‚é‡æ–°é¸æ“‡å›é€€è¡Œç‚ºï¼Œå¯é¸è¡Œç‚ºåŒ…æ‹¬DIRECTã€REJECTã€‚DIRECTè¡¨ç¤ºç›´é€£è½‰ç™¼UDPæµé‡ï¼ŒREJECTè¡¨ç¤ºæ‹’çµ•è½‰ç™¼UDPæµé‡ã€‚
udp-policy-not-supported-behaviour = REJECT
# DNSåŠ«æŒã€‚æœ‰äº›è¨­å‚™æˆ–è»Ÿä»¶ç¸½æ˜¯ä½¿ç”¨ç¡¬ç·¨ç¢¼çš„DNSæœå‹™å™¨ï¼Œä¾‹å¦‚Netflixé€šéGoogle DNS(8.8.8.8æˆ–8.8.4.4)ç™¼é€è«‹æ±‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤é¸é …ä¾†åŠ«æŒæŸ¥è©¢ã€‚
hijack-dns = 8.8.8.8:53,8.8.4.4:53
# åŒ…å«é…ç½®ã€‚å¦‚ã€Œinclude=a.confã€è¡¨ç¤ºç•¶å‰é…ç½®åŒ…å«å¦ä¸€å€‹é…ç½®a.confçš„å…§å®¹ï¼Œç•¶å‰é…ç½®çš„å„ªå…ˆç´šé«˜æ–¼a.confã€‚è©²é¸é …æ˜¯å°é…ç½®å»ºç«‹åŒ…å«é—œä¿‚ï¼Œä»¥æ»¿è¶³åŒæ™‚ä½¿ç”¨å¤šå€‹é…ç½®çš„éœ€æ±‚ã€‚
include = 

[Proxy]
# æ·»åŠ æœ¬åœ°ç¯€é»ã€‚
# Shadowsocksé¡å‹ï¼š
# ç¯€é»åç¨±=ss,åœ°å€,ç«¯å£,password=å¯†ç¢¼,å…¶ä»–åƒæ•¸(å¦‚method=aes-256-cfb,obfs=websocket,plugin=none)
# Vmessé¡å‹ï¼š
# ç¯€é»åç¨±=vmess,åœ°å€,ç«¯å£,password=å¯†ç¢¼,å…¶ä»–åƒæ•¸(å¦‚alterId=0,method=auto,obfs=websocket,tfo=1)
# VLESSé¡å‹ï¼š
# ç¯€é»åç¨±=vless,åœ°å€,ç«¯å£,password=å¯†ç¢¼,tls=true,å…¶ä»–åƒæ•¸(å¦‚obfs=websocket,peer=example.com)
# HTTP/HTTPS/Socks5/Socks5 Over TLSç­‰é¡å‹ï¼š
# ç¯€é»åç¨±=http,åœ°å€,ç«¯å£,ç”¨æˆ¶,å¯†ç¢¼
# ç¯€é»åç¨±=https,åœ°å€,ç«¯å£,ç”¨æˆ¶,å¯†ç¢¼
# ç¯€é»åç¨±=socks5,åœ°å€,ç«¯å£,ç”¨æˆ¶,å¯†ç¢¼
# ç¯€é»åç¨±=socks5-tls,åœ°å€,ç«¯å£,ç”¨æˆ¶,å¯†ç¢¼,skip-common-name-verify=true
# Trojané¡å‹ï¼š
# ç¯€é»åç¨±=trojan,åœ°å€,ç«¯å£,password=å¯†ç¢¼,å…¶ä»–åƒæ•¸(å¦‚allowInsecure=1,peer=example.com)

[Proxy Group]
# ä»£ç†åˆ†çµ„é¡å‹ï¼š
# select:æ‰‹å‹•é¸æ“‡ç¯€é»ã€‚
# url-test:è‡ªå‹•é¸æ“‡å»¶é²æœ€ä½ç¯€é»ã€‚
# fallback:ç¯€é»æ›æ‰æ™‚è‡ªå‹•åˆ‡æ›å…¶ä»–å¯ç”¨ç¯€é»ã€‚
# load-balance:ä¸åŒè¦å‰‡çš„è«‹æ±‚ä½¿ç”¨åˆ†çµ„é‡Œçš„ä¸åŒç¯€é»é€²è¡Œé€£æ¥ã€‚
# random:éš¨æ©Ÿä½¿ç”¨åˆ†çµ„é‡Œçš„ä¸åŒç¯€é»é€²è¡Œé€£æ¥ã€‚
# ----------
# policy-regex-filterè¡¨ç¤ºæ­£å‰‡å¼æˆ–é—œéµè©ç¯©é¸ï¼Œå¸¸ç”¨å¯«æ³•ï¼š
# ä¿ç•™ç¯€é»åç¨±å«æœ‰é—œéµè©Aå’ŒBçš„ç¯€é»:
# (?=.*(A))^(?=.*(B))^.*$
# ä¿ç•™ç¯€é»åç¨±å«æœ‰é—œéµè©Aæˆ–Bçš„ç¯€é»:
# A|B
# æ’é™¤ç¯€é»åç¨±å«æœ‰é—œéµè©Aæˆ–Bçš„ç¯€é»:
# ^((?!(A|B)).)*$
# ä¿ç•™ç¯€é»åç¨±å«æœ‰é—œéµè©Aä¸¦æ’é™¤å«æœ‰é—œéµè©Bçš„ç¯€é»:
# (?=.*(A).)^((?!(B)).)*$
# ----------
# ä»£ç†åˆ†çµ„å…¶ä»–è¨­ç½®åƒæ•¸ï¼š
# interval:æŒ‡å®šé–“éš”å¤šé•·æ™‚é–“å¾Œéœ€è¦é‡æ–°ç™¼èµ·æ¸¬è©¦ã€‚
# timeout:å¦‚æœæ¸¬è©¦åœ¨è¶…æ™‚å‰æœªå®Œæˆï¼Œæ”¾æ£„æ¸¬è©¦ã€‚
# tolerance:åªæœ‰ç•¶æ–°å„ªå‹è€…çš„åˆ†æ•¸é«˜æ–¼èˆŠå„ªå‹è€…çš„åˆ†æ•¸åŠ ä¸Šå…¬å·®æ™‚ï¼Œæ‰æœƒé€²è¡Œç·šè·¯æ›´æ›ã€‚
# url:æŒ‡å®šè¦æ¸¬è©¦çš„URLã€‚
# ----------
# ä¸å«æ­£å‰‡ç¯©é¸çš„ä»£ç†åˆ†çµ„ï¼Œç¤ºä¾‹ï¼š
# åç¨±=é¡å‹(å¦‚select,url-test,fallback,load-balance,random),ç­–ç•¥(å¦‚direct,proxy,è¨‚é–±åç¨±,ä»£ç†åˆ†çµ„,ç¯€é»),interval=æ¸¬è©¦é€±æœŸ,timeout=è¶…æ™‚æ™‚é–“,tolerance=å…¬å·®,select=é»˜èªç­–ç•¥(0è¡¨ç¤ºç¬¬ä¸€å€‹ç­–ç•¥,1è¡¨ç¤ºç¬¬äºŒå€‹ç­–ç•¥,2è¡¨ç¤ºç¬¬ä¸‰å€‹ç­–ç•¥â€¦â€¦),url=æ¸¬è©¦åœ°å€
# å«æ­£å‰‡ç¯©é¸çš„ä»£ç†åˆ†çµ„ï¼Œç¤ºä¾‹ï¼š
# åç¨±=é¡å‹(å¦‚select,url-test,fallback,load-balance,random),policy-regex-filter=æ­£å‰‡å¼æˆ–é—œéµè©ç¯©é¸,interval=æ¸¬è©¦é€±æœŸ,timeout=è¶…æ™‚æ™‚é–“,tolerance=å…¬å·®,select=é»˜èªç­–ç•¥(0è¡¨ç¤ºç¬¬ä¸€å€‹ç­–ç•¥,1è¡¨ç¤ºç¬¬äºŒå€‹ç­–ç•¥,2è¡¨ç¤ºç¬¬ä¸‰å€‹ç­–ç•¥â€¦â€¦),url=æ¸¬è©¦åœ°å€
# ----------
YouTube = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Netflix = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Disney+ = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
HBO = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Spotify = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
Telegram = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Twitter = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Facebook = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
PayPal = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
Amazon = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
è˜‹æœæœå‹™ = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
è°·æ­Œæœå‹™ = select,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
å¾®è»Ÿæœå‹™ = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
å—¶å“©å—¶å“© = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
éŠæˆ²å¹³å° = select,DIRECT,PROXY,é¦™æ¸¯ç¯€é»,å°ç£ç¯€é»,æ—¥æœ¬ç¯€é»,æ–°åŠ å¡ç¯€é»,éŸ“åœ‹ç¯€é»,ç¾åœ‹ç¯€é»,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
é¦™æ¸¯ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡­ğŸ‡°|HK|hk|HONG|Hong|hong|é¦™æ¸¯|æ·±æ¸¯|æ»¬æ¸¯|æ²ªæ¸¯|äº¬æ¸¯|æ¸¯
å°ç£ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡¹ğŸ‡¼|TW|tw|TAIWAN|Taiwan|taiwan|å°ç£|å°æ¹¾|å°åŒ—|å°ä¸­|æ–°åŒ—|å½°åŒ–
æ—¥æœ¬ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡¯ğŸ‡µ|JP|jp|JAPAN|Japan|japan|TOKYO|Tokyo|tokyo|æ—¥æœ¬|æ±äº¬|ä¸œäº¬|å¤§é˜ª|äº¬æ—¥|è˜‡æ—¥|è‹æ—¥|æ»¬æ—¥|æ²ªæ—¥|ä¸Šæ—¥|å·æ—¥|æ·±æ—¥|å»£æ—¥|å¹¿æ—¥
æ–°åŠ å¡ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡¸ğŸ‡¬|SG|sg|SING|Sing|sing|æ–°åŠ å¡|ç…åŸ|ç‹®åŸ|æ»¬æ–°|æ²ªæ–°|äº¬æ–°|æ·±æ–°|æ­æ–°|å»£æ–°|å¹¿æ–°
éŸ“åœ‹ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡°ğŸ‡·|ğŸ‡°ğŸ‡µ|KR|kr|KOREA|Korea|korea|KOR|kor|éŸ“åœ‹|éŸ©å›½|é¦–çˆ¾|é¦–å°”|éŸ“|éŸ©|æ˜¥å·
ç¾åœ‹ç¯€é» = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=ğŸ‡ºğŸ‡¸|US|us|USA|usa|AMERICA|America|america|UNITED|United|united|ç¾åœ‹|ç¾å›½|é³³å‡°åŸ|å‡¤å‡°åŸ|æ´›æ‰ç£¯|æ´›æ‰çŸ¶|è¥¿é›…åœ–|è¥¿é›…å›¾|èŠåŠ å“¥|ç´ç´„|çº½çº¦|æ»¬ç¾|æ²ªç¾|ç¾

[Rule]
# è¦å‰‡é¡å‹ï¼š
# DOMAIN-SUFFIXï¼šåŒ¹é…è«‹æ±‚åŸŸåçš„å¾Œç¶´ã€‚å¦‚ã€ŒDOMAIN-SUFFIX,example.com,DIRECTã€å¯ä»¥åŒ¹é…åˆ°ã€Œa.example.comã€a.b.example.comã€ã€‚
# DOMAIN-KEYWORDï¼šåŒ¹é…è«‹æ±‚åŸŸåçš„é—œéµè©ã€‚å¦‚ã€ŒDOMAIN-KEYWORD,exa,DIRECTã€å¯ä»¥åŒ¹é…åˆ°ã€Œa.example.comã€a.b.example.comã€ã€‚
# DOMAINï¼šåŒ¹é…è«‹æ±‚çš„å®Œæ•´åŸŸåã€‚å¦‚ã€ŒDOMAIN,www.example.com,DIRECTã€åªèƒ½åŒ¹é…åˆ°ã€Œwww.example.comã€ã€‚
# USER-AGENTï¼šåŒ¹é…ç”¨æˆ¶ä»£ç†å­—ç¬¦ä¸²ï¼Œæ”¯æŒä½¿ç”¨é€šé…ç¬¦ã€Œ*ã€ã€‚å¦‚ã€ŒUSER-AGENT,MicroMessenger*,DIRECTã€å¯ä»¥åŒ¹é…åˆ°ã€ŒMicroMessenger Clientã€ã€‚
# URL-REGEXï¼šåŒ¹é…URLæ­£å‰‡å¼ã€‚å¦‚ã€ŒURL-REGEX,^https?://.+/item.+,REJECTã€å¯ä»¥åŒ¹é…åˆ°ã€Œhttps://www.example.com/item/abc/123ã€ã€‚
# IP-CIDRï¼šåŒ¹é…IPv4æˆ–IPv6åœ°å€ã€‚å¦‚ã€ŒIP-CIDR,192.168.1.0/24,DIRECT,no-resolveã€å¯ä»¥åŒ¹é…åˆ°IPæ®µã€Œ192.168.1.1ï½192.168.1.254ã€ã€‚è¦å‰‡åŠ no-resolveæ™‚ï¼ŒIPè«‹æ±‚æœƒåŒ¹é…åˆ°é€™æ¢è¦å‰‡ï¼Œè€ŒåŸŸåè«‹æ±‚ä¸æœƒç”¨è§£æå‡ºä¾†çš„IPå»åŒ¹é…é€™æ¢è¦å‰‡ã€‚è¦å‰‡ä¸åŠ no-resolveæ™‚ï¼Œå‰‡IPè«‹æ±‚å¯åŒ¹é…ï¼ŒåŸŸåè§£æå¾Œçš„IPä¹Ÿå¯åŒ¹é…ã€‚
# IP-ASNï¼šåŒ¹é…IPåœ°å€éš¸å±¬çš„ASNç·¨è™Ÿã€‚å¦‚ã€ŒIP-ASN,56040,DIRECTã€å¯ä»¥åŒ¹é…åˆ°å¾®ä¿¡çš„ç›¸é—œIPè«‹æ±‚ã€‚
# RULE-SETï¼šåŒ¹é…è¦å‰‡é›†å…§å®¹ã€‚è¦å‰‡é›†çš„çµ„æˆéƒ¨åˆ†éœ€åŒ…å«è¦å‰‡é¡å‹ã€‚
# DOMAIN-SETï¼šåŒ¹é…åŸŸåé›†å…§å®¹ã€‚åŸŸåé›†çš„çµ„æˆéƒ¨åˆ†ä¸åŒ…å«è¦å‰‡é¡å‹ã€‚
# SCRIPTï¼šåŒ¹é…è…³æœ¬åç¨±ã€‚
# DST-PORTï¼šåŒ¹é…ç›®æ¨™ä¸»æ©Ÿåçš„ç«¯å£è™Ÿã€‚å¦‚ã€ŒDST-PORT,443,DIRECTã€å¯ä»¥åŒ¹é…åˆ°443ç›®æ¨™ç«¯å£ã€‚
# GEOIPï¼šåŒ¹é…IPæ•¸æ“šåº«ã€‚å¦‚ã€ŒGEOIP,CN,DIRECTã€å¯ä»¥åŒ¹é…åˆ°æ­¸å±¬åœ°ç‚ºCNçš„IPåœ°å€ã€‚
# FINALï¼šå…œåº•ç­–ç•¥ã€‚å¦‚ã€ŒFINAL,PROXYã€è¡¨ç¤ºç•¶å…¶ä»–æ‰€æœ‰è¦å‰‡éƒ½åŒ¹é…ä¸åˆ°æ™‚æ‰ä½¿ç”¨FINALè¦å‰‡çš„ç­–ç•¥ã€‚
# ANDï¼šé‚è¼¯è¦å‰‡ï¼Œèˆ‡è¦å‰‡ã€‚å¦‚ã€ŒAND,((DOMAIN,www.example.com),(DST-PORT,123)),DIRECTã€å¯ä»¥åŒ¹é…åˆ°ã€Œwww.example.com:123ã€ã€‚
# NOTï¼šé‚è¼¯è¦å‰‡ï¼Œéè¦å‰‡ã€‚å¦‚ã€ŒNOT,((DST-PORT,123)),DIRECTã€å¯ä»¥åŒ¹é…åˆ°é™¤äº†ã€Œ123ã€ç«¯å£çš„å…¶ä»–æ‰€æœ‰è«‹æ±‚ã€‚
# ORï¼šé‚è¼¯è¦å‰‡ï¼Œæˆ–è¦å‰‡ã€‚å¦‚ã€ŒOR,((DST-PORT,123),(DST-PORT,456)),DIRECTã€å¯ä»¥åŒ¹é…åˆ°ã€Œ123ã€æˆ–ã€Œ456ã€ç«¯å£çš„æ‰€æœ‰è«‹æ±‚ã€‚
# ----------
# è¦å‰‡ç­–ç•¥ï¼š
# PROXYï¼šä»£ç†ã€‚é€šéé¦–é æ­£åœ¨ä½¿ç”¨çš„ä»£ç†æœå‹™å™¨è½‰ç™¼æµé‡ã€‚
# DIRECTï¼šç›´é€£ã€‚é€£æ¥ä¸ç¶“éä»»ä½•ä»£ç†æœå‹™å™¨ã€‚
# REJECTï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼404ï¼Œæ²’æœ‰å…§å®¹ã€‚
# REJECT-DICTï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼200ï¼Œå…§å®¹ç‚ºç©ºçš„JSONå°è±¡ã€‚
# REJECT-ARRAYï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼200ï¼Œå…§å®¹ç‚ºç©ºçš„JSONæ•¸çµ„ã€‚
# REJECT-200ï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼200ï¼Œæ²’æœ‰å…§å®¹ã€‚
# REJECT-IMGï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼200ï¼Œå…§å®¹ç‚º1åƒç´ GIFã€‚
# REJECT-TINYGIFï¼šæ‹’çµ•ã€‚è¿”å›HTTPç‹€æ…‹ç¢¼200ï¼Œå…§å®¹ç‚º1åƒç´ GIFã€‚
# REJECT-DROPï¼šæ‹’çµ•ã€‚ä¸Ÿæ£„IPåŒ…ã€‚
# REJECT-NO-DROPï¼šæ‹’çµ•ã€‚è¿”å›ICMPç«¯å£ä¸å¯é”ã€‚
# é™¤æ­¤ä¹‹å¤–ï¼Œè¦å‰‡ç­–ç•¥é‚„å¯ä»¥é¸æ“‡ã€Œä»£ç†åˆ†çµ„ã€ã€ã€Œè¨‚é–±åç¨±ã€ã€ã€Œåˆ†çµ„ã€ã€ã€Œç¯€é»ã€ã€‚
# ----------
# è¦å‰‡åŒ¹é…çš„å„ªå…ˆç´šï¼š
# 1.è¦å‰‡å¾ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ã€‚
# 2.åŸŸåè¦å‰‡å„ªå…ˆæ–¼IPè¦å‰‡ã€‚
# ----------
# é—œæ–¼å±è”½443ç«¯å£çš„UDPæµé‡çš„è§£é‡‹å…§å®¹ï¼šHTTP3/QUICå”è­°é–‹å§‹æµè¡Œï¼Œä½†æ˜¯åœ‹å…§ISPå’Œåœ‹éš›å‡ºå£çš„UDPå„ªå…ˆç´šéƒ½å¾ˆä½ï¼Œè¡¨ç¾å¾ˆå·®ï¼Œå±è”½æ‰ä»¥å¼·åˆ¶å›é€€HTTP2/HTTP1.1ã€‚ï¼ˆå¦‚éœ€å•“ç”¨è©²é‚è¼¯è¦å‰‡ï¼Œè«‹åˆªé™¤ANDå‰é¢çš„æ³¨é‡‹ç¬¦è™Ÿ#ï¼‰
# AND,((PROTOCOL,UDP),(DST-PORT,443)),REJECT-NO-DROP
# ----------
# ç›´é€£ç­–ç•¥çš„ä¿®æ­£è¦å‰‡é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/wlxuf/add_rule/main/direct-amend.list,DIRECT
# ä»£ç†ç­–ç•¥çš„ä¿®æ­£è¦å‰‡é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/wlxuf/add_rule/main/proxy-amend.list,PROXY
# åœ‹å¤–å¸¸ç”¨appå–®ç¨åˆ†æµï¼šYouTubeï¼ŒNetflixï¼ŒDisney+ï¼ŒHBOï¼ŒSpotifyï¼ŒTelegramï¼ŒPayPalï¼ŒTwitterï¼ŒFacebookï¼ŒGoogleï¼ŒTikTokï¼ŒGitHubï¼ŒSpeedtestã€‚
# åœ‹å…§å¸¸ç”¨appå–®ç¨åˆ†æµï¼šè˜‹æœæœå‹™ï¼Œå¾®è»Ÿæœå‹™ï¼Œå—¶å“©å—¶å“©ï¼Œç¶²æ˜“é›²éŸ³æ¨‚ï¼ŒéŠæˆ²å¹³å°ï¼Œäºé¦¬éœï¼Œç™¾åº¦ï¼Œè±†ç“£ï¼Œå¾®ä¿¡ï¼ŒæŠ–éŸ³ï¼Œå¾®åšï¼ŒçŸ¥ä¹ï¼Œå°ç´…æ›¸ã€‚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/BiliBili/BiliBili.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Baidu/Baidu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouBan/DouBan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouYin/DouYin.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Weibo/Weibo.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Zhihu/Zhihu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Disney/Disney.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/HBO/HBO.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/PayPal/PayPal.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Amazon/Amazon.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Sony/Sony.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Nintendo/Nintendo.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Epic/Epic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/SteamCN/SteamCN.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Steam/Steam.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Game/Game.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Microsoft/Microsoft.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Speedtest/Speedtest.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list,DIRECT
# æœ¬åœ°å±€åŸŸç¶²åœ°å€çš„è¦å‰‡é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT
# è¡¨ç¤ºCNåœ°å€çš„IPåˆ†æµèµ°ç›´é€£ï¼ŒGEOIPæ•¸æ“šåº«ç”¨ä¾†åˆ¤æ–·IPæ˜¯å¦å±¬æ–¼CNåœ°å€ã€‚é»˜èªä½¿ç”¨Shadowrocketè‡ªå¸¶çš„GEOIPæ•¸æ“šåº«ï¼Œå¦‚æœæ‚¨æƒ³æ›¿æ›å…¶ä»–æ•¸æ“šåº«ï¼Œå¯åœ¨ è¨­ç½® - GeoLite2æ•¸æ“šåº« é‡Œæ·»åŠ å’Œä¿®æ”¹ã€‚
GEOIP,CN,DIRECT
# è¡¨ç¤ºç•¶å…¶ä»–æ‰€æœ‰è¦å‰‡éƒ½åŒ¹é…ä¸åˆ°æ™‚æ‰ä½¿ç”¨FINALè¦å‰‡çš„ç­–ç•¥ã€‚
FINAL,PROXY

[Host]
# åŸŸåæŒ‡å®šæœ¬åœ°å€¼ï¼š
# example.com=1.2.3.4
# åŸŸåæŒ‡å®šDNSæœå‹™å™¨ï¼š
# example.com=server:1.2.3.4
# wifiåç¨±æŒ‡å®šDNSæœå‹™å™¨ï¼Œå¦‚éœ€æŒ‡å®šå¤šå€‹DNSï¼Œå¯ç”¨é€—è™Ÿåˆ†éš”ï¼š
# ssid:wifiåç¨±=server:1.2.3.4
localhost = 127.0.0.1

[URL Rewrite]
# Googleæœç´¢å¼•æ“é˜²è·³è½‰çš„é‡å¯«ã€‚
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

[Script]
# BoxJså®‰è£è…³æœ¬ã€‚
Rewrite: BoxJs = type=http-request,pattern=https?:\/\/boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, requires-body=true, timeout=120

[MITM]
# Shadowrocketåƒ…æœƒè§£å¯†hostnameæŒ‡å®šçš„åŸŸåçš„è«‹æ±‚ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‰ç¶´ - æ’é™¤ç‰¹å®šä¸»æ©Ÿåï¼Œå¦‚ -*.example.comã€‚iOSç³»çµ±å’ŒæŸäº›æ‡‰ç”¨æœ‰åš´æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œåƒ…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è­‰æ›¸ï¼Œå°é€™äº›åŸŸåå•“å‹•è§£å¯†å¯èƒ½å°è‡´å•é¡Œï¼Œå¦‚ *.apple.comï¼Œ*.icloud.comã€‚
hostname = www.google.cn
